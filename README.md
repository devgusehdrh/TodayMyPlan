# Mini Project

## 프로젝트 명

오늘 뭐하지?

## 소개

매일 오늘 할 일을 정해서 적고 각 참여자가 밑에 응원 댓글을 달 수 있는 웹사이트

## 페이지 구성

[필요 API](https://www.notion.so/7ae7f153e6d64851a950db93ceee5167)

- 로그인 페이지 - 강성종, 고동현, 정재호, 홍현승
    
    ![Untitled](read_img/Untitled.png)
    
    - 로그인 기능
    → 유저가 아이디, 패스워드를 입력한 후 ‘로그인’버튼을 클릭하면 정보 확인 후 로그인 처리(메인 페이지로 이동)
    - 회원가입 페이지 렌더링
    → ‘회원가입’ 버튼 클릭 시 회원가입 페이지로 렌더링
    - 페이지 새로고침
    → 페이지 중앙 로고 클릭 시, 로그인 페이지로 렌더링(같은 페이지에서 재이동)
    - 유효성 검사
    → 유저 아이디, 패스워드 유효성 검사
- 회원가입 페이지 - 고동현
    
    ![Untitled](read_img/Untitled%201.png)
    
    - 회원가입(등록) 기능
     → 유저가 입력한 아이디, 패스워드, 닉네임이 입력 요구사항을 충족할 시, user DB에 데이터 등록
    - 다시쓰기 기능
     → 유저가 입력 도중 ‘다시쓰기’ 버튼을 클릭하면 입력했던 내용을 빈 칸으로 변환
    - 로그인 페이지 이동
     → 좌측 상단 로고를 클릭하면 로그인 페이지로 이동
    - 유효성 검사
     → 입력 정보 유효성 검사
- 메인 페이지 - 정재호
    
    ![Untitled](read_img/Untitled%202.png)
    
    - 로그아웃
    - 작성된 포스트 세부내용 페이지로 이동
    - 당일 업로드 된 플랜 카드를 메인 화면에 표시 (3열 * n행)
    - “(닉네임)님, 오늘도 화이팅!” 문구 표시 및 프로필 사진 표시
    - 오늘 날짜 표시  ex) 오늘은 2022년 3월 8일 화요일 입니다.
    - 회원정보수정 버튼 클릭 시 회원정보수정 페이지로 이동
    - 포스팅(Modal 기능 사용)
        
        → 데일리 플랜 등록하기, Plan DB에 데이터 등록
        **이미 오늘 등록한 유저는 두 번 이상 등록할 수 없음*
        
    - 포스팅 삭제 기능
    → 메인 페이지 내 포스팅 중 내 포스팅에만 x(삭제) 버튼이 노출됨
    → x 버튼을 클릭하면 정말 삭제할 것인지 한 번 묻는 confirm이 표시됨
    → confirm 창에서 “삭제” 클릭 시 삭제 처리되며 “취소” 클릭 시 취소됨
    - 포스팅 수정 기능(Modal 기능 사용)
    → 메인 페이지에서 내 포스팅을 클릭했을 때 수정 폼을 Modal로 표시
    **메인 페이지에서 다른 사람의 포스팅을 클릭하면 세부페이지로 이동함*
- 세부 내용 페이지 - 강성종, 고동현
    
    ![Untitled](read_img/Untitled%203.png)
    
    - 로그인 상태 확인  
    - 로그아웃
    - 로고 클릭시 메인 화면으로 이동
    - 해당 닉네임이 작성한 오늘의 계획 출력
        - 닉네임
        - 내용    
    ---
    
    - 해당 포스팅에 해당되는 댓글 목록 출력
        
        → planDB 상 comment(0~?) 불러오기
        
        - 작성자 닉네임
        - 해당하는 댓글 내용
    - 댓글 작성
        
        → planDB 상 nickname, comment 값에 추가
        
        - 작성자 닉네임
        - 내용
    - 포스팅 수정 기능(추가)
    - 포스팅 삭제 기능(추가)
    - 코멘트 수정 기능(추가)
    - 코멘트 삭제 기능(추가)
- 회원정보 페이지(추가) - 홍현승
    
    ![Untitled](read_img/Untitled%204.png)
    
    - 닉네임, 패스워드 변경(추가)

포스팅, 코멘트 수정 삭제(추가 목표)

닉네임, 패스워드 변경(추가 목표)

날짜 별 포스팅 검색 가능(추가 목표)

## Github

[https://github.com/devgusehdrh/TodayMyPlan.git](https://github.com/devgusehdrh/TodayMyPlan.git)

## 프로젝트 1일차 진행상황

- 로그인 구현

## 질문

### 기획 멘토링

- 프로젝트 범위 충분한지(난이도)
- 역할분담 기준
    - 유저 - 회원가입, 로그인, 회원정보 수정
    계획 - 계획 목록 조회, 세부내용 조회, 계획 포스팅
    댓글 - 댓글 목록 조회, 댓글 수정
- API URL 작성 규칙 확인 필요
    - restful api 또는 rest api 로 검색 후 수정
- 프로젝트 임무를 어떻게 분류하고 각 기능 구현에 얼마나 걸리는 지 생각해 볼 것

## Trouble Shooting

- 1. 형 변환 에러 이슈
    - [이슈 발생 과정]
        - 메인 화면의 '카드'를 클릭할 때, 상세 페이지 라우터 URL인 "/detail" 뒤에
        각 카드가 가지고 있는 고유 번호를 붙여서 라우터로 이동합니다.
          *예) /detail/1*
        
        라우터에서는 str타입인 카드의 고유 번호 'plan_no'를 파라매터로 받아와서 정수형(int)로 캐스팅해줍니다.
          *라우터 내 캐스팅 코드: no = int(plan_no)*
        이후 상세 페이지로 렌더링을 하는 메소드 입니다.
        
        위의 캐스팅 과정에서 디버그 실행 결과, 정상적으로 int타입으로 변환이 된 것을 확인했고 페이지 렌더링 또한 문제 없이 실행되었습니다.
          *확인 과정 : print(type(no))  --> 결과 : int*
        
        다만, 파이참 콘솔에서 형변환 에러인 "**ValueError: invalid literal for int() with base 10:**" 이 발생했다고 표시됩니다.
        
        본래 원하고자 하는 실행 결과 및 프로그램 실행에는 전혀 지장이 없으나, 콘솔에 오류가 뜨는 이유를 알 수가 없었습니다.
    - [이슈 해결 방법]
        - /detail 라우터에 넘어올 때 plan_no에 더블쿼터(”)가 포함되어 있는 것을 확인했습니다.
        그래서 숫자만 남기기 위한 패키지 ‘**re**’를 import하고 plan_no에 정규식을 사용하여 더블쿼터를 제외, 숫자만 남기도록 처리했습니다.
        *→ 정규식은 아래와 같습니다.*
        `plan_no = re.sub*(*'*[*^0**-**9*]*', ' ', plan_no*)*.strip*()*`
- 2. 댓글 번호 파라매터 인식 이슈
    - [이슈 발생 과정]
    각 포스팅에 달린 댓글을 삭제하기 위해 "삭제"버튼을 클릭할 시,
    댓글 번호를 '/detail/comment-delete' 라우터에 파라매터로 넘겨 삭제 하도록 설계
    
    댓글 div가 반복문으로 복수가 존재하는 상태였으며 댓글 번호를 포함하고 있는
    <div id="comment_id">{{ comment.comment_no }}</div>의  값을 불러오지 못하는 이슈 발생
    - [이슈 해결 방법]
    id가 "comment_id"인 div가 복수로 존재해 안에 내용(comment.comment_no)을
    불러오지 못하는 상황인 것을 인식함. 따라서 해당 div를 삭제, 댓글 번호를 댓글 카드div자체 내에 부여.
    => <div class="card" id="{{ comment.comment_no }}">
    이후 "삭제"버튼을 클릭할 때, 파라매터 this를 사용하여 button 태그 자체를 삭제 함수로 전달.
    이후 태그의 상위 요소를 찾는 parent구문을 사용, 상위 div의 id값(댓글 번호)을 서버로 전달하여 해결.

### 수정했으면 좋겠다고 생각되는 부분

- 한 사용자가 여러 번 계획을 등록할 수 있음
    
    → 오늘 등록했던 사용자가 글을 다시 등록하지 못하게 변경 **(반영완료 - 정재호)**
    
    → 오늘 등록했던 사용자가 클릭 시 해당 글을 수정할 수 있게 변경 **(반영완료 - 정재호, 삭제도 추가했습니다.)**
    
- 메인페이지에서 세부페이지로 넘어가는 부분이 약간 자연스럽지 못한 것처럼 느껴집니다
    
    → 모달기능으로 세부페이지를 새로 띄우는 방법으로 변경
    
    → is_hidden 기능을 사용해서 카드들을 없애고 세부페이지를 카드들이 있던 자리에 나타나게 변경
    
    → 페이지 구성 변경
    
- 회원정보 페이지 내 메인 페이지 이동이 불가
    
    → 유저가 오늘 등록한 계획이 없으면 회원정보 페이지 내에서 메인 페이지로 이동이 불가하기 때문에 로고 클릭 시 메인 페이지로 이동하도록 변경
	
## 시연영상
https://www.youtube.com/watch?v=EYlBasO81S0
